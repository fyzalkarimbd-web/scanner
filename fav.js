document.addEventListener('DOMContentLoaded',function(){const favContainer=document.getElementById('fav-container');const favSection=document.getElementById('fav-tools-section');const favSep=document.getElementById('fav-sep');document.querySelectorAll('.mode-card-btn').forEach(btn=>{const toolId=btn.id;if(!toolId)return;const star=document.createElement('i');star.className='fa-solid fa-star fav-star-btn';star.setAttribute('title','Add to Favorites');star.onclick=function(e){e.stopPropagation();toggleFavorite(toolId)};btn.style.position='relative';btn.appendChild(star)});function renderFavorites(){const favs=JSON.parse(localStorage.getItem('site_favs'))||[];favContainer.innerHTML='';document.querySelectorAll('.fav-star-btn').forEach(s=>s.classList.remove('is-fav'));if(favs.length>0){favSection.style.display='block';favSep.style.display='block';favs.forEach(id=>{const originalBtn=document.getElementById(id);if(originalBtn){const starInOriginal=originalBtn.querySelector('.fav-star-btn');if(starInOriginal)starInOriginal.classList.add('is-fav');const clone=originalBtn.cloneNode(!0);clone.classList.remove('active');clone.onclick=originalBtn.onclick;const cloneStar=clone.querySelector('.fav-star-btn');cloneStar.onclick=(e)=>{e.stopPropagation();toggleFavorite(id)};favContainer.appendChild(clone)}})}else{favSection.style.display='none';favSep.style.display='none'}}
function toggleFavorite(id){let favs=JSON.parse(localStorage.getItem('site_favs'))||[];if(favs.includes(id)){favs=favs.filter(item=>item!==id)}else{favs.push(id)}
localStorage.setItem('site_favs',JSON.stringify(favs));renderFavorites()}
renderFavorites()})
