function openConverterModal(){"function"==typeof setActiveMode&&setActiveMode("mode-converter-tool");var e=document.getElementById("imageConverterModal");e&&(e.style.display="flex",document.body.style.overflow="hidden")}function closeConverterModal(){var e=document.getElementById("imageConverterModal");e&&(e.style.display="none",document.body.style.overflow="auto",document.getElementById("fileListCV").innerHTML="",document.getElementById("previewCV").innerHTML="",document.getElementById("imageInputCV").value="")}!function(){var e=document.getElementById("dropAreaCV"),n=document.getElementById("imageInputCV"),t=document.getElementById("fileListCV"),r=document.getElementById("previewCV"),a=document.getElementById("convertBtn"),i=document.getElementById("formatSelect"),o=document.getElementById("qualityRange"),l=[];function d(e){document.getElementById("qualityLabelNum").innerText=Math.round(100*e)+"%";var n=(e-.1)/.9*100;o.style.background="linear-gradient(to right, #4f46e5 0%, #4f46e5 "+n+"%, #e2e8f0 "+n+"%, #e2e8f0 100%)"}function c(e){var n=Array.from(e).filter(function(e){return e&&e.type&&e.type.startsWith("image")});l=l.concat(n),f()}function f(){if(t.innerHTML="",r.innerHTML="",l.forEach(function(e,n){var a=document.createElement("div");if(a.className="cv-file-item",a.innerHTML='<span class="cv-file-name">'+e.name+'</span><button onclick="removeConvFile('+n+')" style="background:none; color:#ef4444; border:none; cursor:pointer; font-size:20px;">\xd7</button>',t.appendChild(a),n<6){var i=new FileReader;i.onload=function(e){var n=document.createElement("img");n.src=e.target.result,n.className="preview-thumb-cv",r.appendChild(n)},i.readAsDataURL(e)}}),l.length>6){var e=document.createElement("div");e.style="width:55px; height:55px; background:#f1f5f9; border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:11px; font-weight:800; color:#475569; border:2px solid #e2e8f0;",e.innerText="+"+(l.length-6),r.appendChild(e)}}async function s(){if(0===l.length){"function"==typeof showAlert?showAlert("Please select or drag images first!"):alert("Please select or drag images first!");return}var e=i.value,n=Number(o.value),t=a.innerHTML;a.disabled=!0,a.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i> Processing...';for(var r=0;r<l.length;r++)try{var d=await u(l[r],e,n),c=document.createElement("a");c.href=URL.createObjectURL(d.blob),c.download=d.name,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(c.href),await new Promise(function(e){setTimeout(e,400)})}catch(f){console.error("Error converting file")}a.disabled=!1,a.innerHTML=t}function u(e,n,t){return new Promise(function(r,a){var i=new FileReader;i.onload=function(i){var o=new Image;o.onload=function(){var i=document.createElement("canvas");i.width=o.width,i.height=o.height,i.getContext("2d",{willReadFrequently:!0}).drawImage(o,0,0),i.toBlob(function(t){if(!t)return a();var i=n.split("/")[1];r({blob:t,name:e.name.replace(/\.[^.]+$/,"")+"."+i})},n,t)},o.src=i.target.result},i.readAsDataURL(e)})}e&&(o.addEventListener("input",function(e){d(e.target.value)}),d(.8),e.addEventListener("click",function(){n.click()}),n.addEventListener("change",function(e){c(e.target.files)}),e.addEventListener("dragover",function(n){n.preventDefault(),e.style.background="#eff6ff"}),e.addEventListener("dragleave",function(){e.style.background="#f8faff"}),e.addEventListener("drop",function(n){n.preventDefault(),e.style.background="#f8faff",c(n.dataTransfer.files)}),window.removeConvFile=function(e){l.splice(e,1),f()},a.addEventListener("click",s))}();
