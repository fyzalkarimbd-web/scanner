function openScannerModal(){document.getElementById("scannerModal").style.display="flex",document.body.style.overflow="hidden",resetScanner()}function closeScannerModal(){document.getElementById("scannerModal").style.display="none",document.body.style.overflow="auto",resetScanner(),hideThemeAlert()}function resetScanner(){let e=document.getElementById("qr-file-input");e&&(e.value="");let t=document.getElementById("scan-output");t&&(t.value=""),document.getElementById("scanner-result-box").style.display="none";let l=document.getElementById("upload-container");l.style.display="block",l.style.opacity="1";let n=document.getElementById("drop-zone");n.innerHTML=`
        <i class='fa-solid fa-cloud-arrow-up' style='font-size: 40px; color: #6366f1; margin-bottom: 15px;'></i>
        <p style='font-weight: 700; color: #1e293b; margin: 0;'>Click to Upload Image</p>
        <p style='font-size: 12px; color: #64748b; margin-top: 5px;'>Supports PNG, JPG, WEBP</p>
    `}async function scanUploadedFile(e){let t=e.target.files[0];if(!t)return;let l=document.getElementById("drop-zone"),n=document.getElementById("upload-container");n.style.opacity="0.7",l.innerHTML="<i class='fa-solid fa-circle-notch fa-spin' style='font-size:40px; color:#6366f1;'></i><p style='margin-top:10px; font-weight:600;'>Scanning... Please wait</p>";let o=new Html5Qrcode("qr-reader-hidden");try{let a=await o.scanFile(t,!0);document.getElementById("scan-output").value=a,document.getElementById("scanner-result-box").style.display="block",n.style.display="none"}catch(s){showThemeAlert("Could not find any QR code or Barcode. Please upload a clear image."),resetScanner()}}function showThemeAlert(e){document.getElementById("theme-alert-msg").innerText=e,document.getElementById("theme-alert-box").style.display="block"}function hideThemeAlert(){document.getElementById("theme-alert-box").style.display="none"}function copyScannerResult(e){let t=document.getElementById("scan-output"),l=document.getElementById("scan-copy-label"),n=e.querySelector("i");t.value&&navigator.clipboard.writeText(t.value).then(()=>{l.innerText="Copied!",e.style.background="#25D366",n&&(n.className="fa-solid fa-check"),setTimeout(()=>{l.innerText="Copy Result",e.style.background="#0f172a",n&&(n.className="fa-solid fa-copy")},2e3)}).catch(e=>{t.select(),document.execCommand("copy")})}
