function openPdfConverterModal(){"function"==typeof setActiveMode&&setActiveMode("mode-pdf-converter");var e=document.getElementById("pdfConverterModal");e&&(e.style.display="flex",document.body.style.overflow="hidden")}function closePdfConverterModal(){var e=document.getElementById("pdfConverterModal");e&&(e.style.display="none",document.body.style.overflow="auto")}!function(){let e=document.getElementById("pdfInput"),t=document.getElementById("pdfConvertBtn"),n=document.getElementById("pdfZipBtn"),l=document.getElementById("pdfClearBtn"),a=document.getElementById("pdfStatus"),i=document.getElementById("pdfPreviewList"),d=document.getElementById("pdfProgressBar"),r=document.getElementById("pdfProgressWrap"),o=document.getElementById("pageCount"),s=document.getElementById("pdfScale"),f=document.getElementById("pdfScaleNum"),c=null,p=[];function g(e){f.innerText=e;let t=s.min,n=s.max,l=(e-t)/(n-t)*100;s.style.background=`linear-gradient(to right, #4f46e5 0%, #4f46e5 ${l}%, #e2e8f0 ${l}%, #e2e8f0 100%)`}function y(){return!!c||("function"==typeof showAlert?showAlert("Please select a PDF file first!"):alert("Please select a PDF file first!"),!1)}function u(e,t){let n=document.createElement("div");n.className="preview-item-cv",n.innerHTML=`
            <div class="thumb-cv"><img src="${t}"/></div>
            <div class="meta-cv">${e}</div>
            <a href="${t}" download="${e}" style="color:#4f46e5; font-size:24px;"><i class="fa-solid fa-circle-down"></i></a>
        `,i.appendChild(n)}function m(){p.forEach(e=>URL.revokeObjectURL(e.url)),p=[],i.innerHTML="",d.style.width="0%",r.style.display="none",n.disabled=!0}window.pdfjsLib&&(pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js"),g(s.value),s.addEventListener("input",function(e){g(e.target.value)}),e.addEventListener("change",t=>{let n=t.target.files[0];if(n){if("application/pdf"!==n.type){"function"==typeof showAlert&&showAlert("Invalid File! Please upload a PDF."),e.value="";return}c=n,a.textContent="File Name: "+(n.name.length>20?n.name.substring(0,18)+"...":n.name),m()}}),t.addEventListener("click",async()=>{if(y()){t.disabled=!0,r.style.display="block",p=[],i.innerHTML="";try{let e=await c.arrayBuffer(),l=await pdfjsLib.getDocument({data:e}).promise,f=l.numPages;o.textContent=f+" Pages";let g=parseFloat(s.value)/20,m=document.getElementById("pdfFormat").value;for(let v=1;v<=f;v++){a.textContent=`Rendering Page ${v} of ${f}...`;let h=await l.getPage(v),w=h.getViewport({scale:g}),E=document.createElement("canvas"),$=E.getContext("2d",{willReadFrequently:!0});E.width=w.width,E.height=w.height,await h.render({canvasContext:$,viewport:w}).promise;let b=await new Promise(e=>E.toBlob(e,m,.9)),B=URL.createObjectURL(b),P=`page_${v}.${m.split("/")[1]}`;p.push({name:P,blob:b,url:B}),u(P,B),d.style.width=v/f*100+"%",E.width=0,E.height=0}a.textContent="âœ“ All Pages Converted!",a.style.color="#059669",n.disabled=!1}catch(C){a.textContent="Error: Process failed.",a.style.color="#ef4444",console.error(C)}finally{t.disabled=!1}}}),n.addEventListener("click",async()=>{if(0===p.length)return y();n.innerHTML="<i class='fa-solid fa-spinner fa-spin'></i> Zipping...";let e=new JSZip;p.forEach(t=>e.file(t.name,t.blob));let t=await e.generateAsync({type:"blob"});saveAs(t,c.name.replace(".pdf","")+"_images.zip"),n.innerHTML="Download ZIP"}),l.addEventListener("click",()=>{e.value="",c=null,m(),a.textContent="Ready to begin",a.style.color="#4f46e5",o.textContent="0 Pages"})}();
